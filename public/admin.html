<!DOCTYPE html>
<html>

<body style="background:#0b0b12;color:white;font-family:Arial">

<h2>Admin Panel</h2>

<h3>Deposits</h3>

<div id="deposits"></div>

<h3>Withdraws</h3>

<div id="withdraws"></div>

<script>

function loadDeposits(){

fetch("/admin/deposits")
.then(res=>res.json())
.then(data=>{

let html="";

data.forEach(d=>{
html+=`
<div style="border:1px solid gold;padding:10px;margin:10px">
UserID: ${d.userId} <br>
Amount: ${d.amount} <br>
Method: ${d.method} <br>
TRX: ${d.trxId} <br>
<button onclick="approveDeposit(${d.id},${d.userId},${d.amount})">Approve</button>
</div>
`;
});

document.getElementById("deposits").innerHTML=html;

});

}

function approveDeposit(id,userId,amount){

fetch("/admin/approve-deposit",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({id,userId,amount})
})
.then(()=>loadDeposits());

}

function loadWithdraws(){

fetch("/admin/withdraws")
.then(res=>res.json())
.then(data=>{

let html="";

data.forEach(w=>{
html+=`
<div style="border:1px solid red;padding:10px;margin:10px">
UserID: ${w.userId} <br>
Amount: ${w.amount} <br>
Account: ${w.account} <br>
<button onclick="approveWithdraw(${w.id})">Approve</button>
</div>
`;
});

document.getElementById("withdraws").innerHTML=html;

});

}

function approveWithdraw(id){

fetch("/admin/approve-withdraw",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({id})
})
.then(()=>loadWithdraws());

}

loadDeposits();
loadWithdraws();

</script>

</body>
</html>
