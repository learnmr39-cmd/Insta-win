<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin</title>
<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
color:white;
padding:15px;
}
.box{
background:#141422;
padding:15px;
margin-bottom:15px;
border-radius:12px;
box-shadow:0 0 15px gold;
}
button{
padding:8px;
background:gold;
border:none;
border-radius:6px;
}
</style>
</head>
<body>

<h2 style="color:gold;text-align:center">Admin Panel</h2>

<h3>Pending Deposits</h3>
<div id="deposits"></div>

<h3>Pending Withdraws</h3>
<div id="withdraws"></div>

<script>

function loadDeposits(){
fetch("/admin/deposits")
.then(r=>r.json())
.then(data=>{
let html="";
data.forEach(d=>{
html+=`
<div class="box">
User: ${d.userId}<br>
Amount: ${d.amount}<br>
TRX: ${d.trxId}<br>
<button onclick="approveDeposit(${d.id},${d.userId},${d.amount})">Approve</button>
</div>`;
});
document.getElementById("deposits").innerHTML=html;
});
}

function approveDeposit(id,userId,amount){
fetch("/admin/approve-deposit",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({id,userId,amount})
}).then(()=>loadDeposits());
}

function loadWithdraws(){
fetch("/admin/withdraws")
.then(r=>r.json())
.then(data=>{
let html="";
data.forEach(w=>{
html+=`
<div class="box">
User: ${w.userId}<br>
Amount: ${w.amount}<br>
Account: ${w.account}<br>
<button onclick="approveWithdraw(${w.id},${w.userId},${w.amount})">Approve</button>
</div>`;
});
document.getElementById("withdraws").innerHTML=html;
});
}

function approveWithdraw(id,userId,amount){
fetch("/admin/approve-withdraw",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({id,userId,amount})
}).then(()=>loadWithdraws());
}

loadDeposits();
loadWithdraws();

</script>

</body>
</html>
